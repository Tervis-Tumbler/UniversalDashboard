{"version":3,"sources":["webpack:///./src/app/ud-counter.jsx","webpack:///./src/app/basics/text-size.jsx"],"names":["numeral","require","UdCounter","state","value","errorMessage","hasError","props","id","fetchGet","json","error","setState","message","bind","loadData","pubSubToken","PubSub","subscribe","onIncomingEvent","eventName","event","type","unsubscribe","prevProps","title","refreshInterval","autoRefresh","icon","em","opacity","float","marginLeft","fontSize","position","top","color","fontColor","format","content","textAlignment","textSize","actions","links","map","x","i","url","background","backgroundColor","React","Component","TextSize","size","children"],"mappings":"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","file":"ud-counter.98b6e0fc72b16353d581.bundle.js","sourcesContent":["import React from 'react';\r\nimport UdIcon from './ud-icon.jsx';\r\nvar numeral = require(\"numeral\");\r\nimport {fetchGet} from './services/fetch-service.jsx';\r\nimport ReactInterval from 'react-interval';\r\nimport ErrorCard from './error-card.jsx';\r\nimport UdLink from './ud-link.jsx';\r\nimport TextSize from './basics/text-size.jsx';\r\nimport PubSub from 'pubsub-js';\r\n\r\nexport default class UdCounter extends React.Component {\r\n    constructor() {\r\n        super();\r\n\r\n        this.state = {\r\n            value: 0,\r\n            errorMessage: \"\",\r\n            hasError: false\r\n        }\r\n    }\r\n\r\n    loadData() {\r\n        if (!this.props.id || this.props.id === \"\") {\r\n            return;\r\n        }\r\n\r\n        fetchGet(`/api/internal/component/element/${this.props.id}`,function(json){\r\n            if (json.error) {\r\n                this.setState({\r\n                    hasError: true, \r\n                    errorMessage: json.error.message\r\n                })\r\n            } else {\r\n                this.setState({\r\n                    hasError: false,\r\n                    value: json\r\n                });\r\n            }\r\n        }.bind(this));\r\n    }\r\n\r\n    componentWillMount() {\r\n        this.loadData();\r\n        this.pubSubToken = PubSub.subscribe(this.props.id, this.onIncomingEvent.bind(this));\r\n    }\r\n\r\n    onIncomingEvent(eventName, event) {\r\n        if (event.type === \"syncElement\") {\r\n            this.loadData();\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        PubSub.unsubscribe(this.pubSubToken);\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n        if (prevProps.id !== this.props.id) {\r\n            this.loadData();\r\n        }\r\n    }\r\n\r\n    render() {\r\n        if (this.state.hasError) {\r\n            return [<ErrorCard message={this.state.errorMessage} title={this.props.title} id={this.props.id} key={this.props.id} />, <ReactInterval timeout={this.props.refreshInterval * 1000} enabled={this.props.autoRefresh} callback={this.loadData.bind(this)}/>]\r\n        }\r\n\r\n        let icon = null;\r\n        if (this.props.icon !== 'none') {\r\n            var em = \"6em\";\r\n            if (this.props.value == null) {\r\n                em = \"4em\";\r\n            }\r\n\r\n            icon = <UdIcon icon={this.props.icon} style={{opacity: 0.05, float:'left', marginLeft: '70px', fontSize: em, position:'absolute', top: '20px', color: this.props.fontColor}}/>\r\n        }\r\n\r\n        var value = numeral(this.state.value).format(this.props.format);\r\n\r\n        var content = <div className={`${this.props.textAlignment}-align`}>\r\n            {icon}\r\n            <TextSize size={this.props.textSize}>{value}</TextSize>\r\n        </div>\r\n\r\n        var actions = null \r\n        if (this.props.links) {\r\n            var links = this.props.links.map(function(x, i) {\r\n                return <UdLink {...x} key={x.url} />\r\n            });\r\n            actions = <div className=\"card-action\">\r\n                {links}\r\n            </div>\r\n        }\r\n\r\n        return <div className=\"card ud-counter\" id={this.props.id} style={{background: this.props.backgroundColor, color: this.props.fontColor}}>\r\n                  <div className=\"card-content\">\r\n                    <span className=\"card-title\">{this.props.title}</span>\r\n                    {content}\r\n                </div>\r\n                {actions}\r\n                <ReactInterval timeout={this.props.refreshInterval * 1000} enabled={this.props.autoRefresh} callback={this.loadData.bind(this)}/>\r\n            </div>\r\n    }\r\n}","import React from 'react';\r\n\r\nexport default class TextSize extends React.Component {\r\n    render() {\r\n        if (this.props.size == \"Small\") {\r\n            return this.props.children;\r\n        }\r\n\r\n        if (this.props.size == \"Medium\") {\r\n            return <h5>{this.props.children}</h5>;\r\n        }\r\n\r\n        if (this.props.size == \"Large\") {\r\n            return <h3>{this.props.children}</h3>;\r\n        }\r\n    }\r\n}"],"sourceRoot":""}